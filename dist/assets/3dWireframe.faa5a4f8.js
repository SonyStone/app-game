import{o as $,y as J,t as Q}from"./vendor.110b933d.js";import{u as tt}from"./index.3dda4473.js";var et=`#version 100\r
precision mediump float;\r
attribute vec3 aPosition;\r
uniform mat4 uTransform;\r
uniform mat4 uViewProjection;\r
uniform vec3 uColor;\r
varying vec4 vColor;\r
\r
void main() {\r
  gl_Position = uViewProjection * uTransform * vec4(aPosition, 1.0);\r
  vColor = vec4(uColor, 1.0);\r
}`,nt=`#version 100\r
precision mediump float;\r
varying vec4 vColor;\r
\r
void main() {\r
  gl_FragColor = vColor;\r
}`;const j=class{static identity(o){return o=o||[],o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}static copy(o,t){return t=t||[],t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t}static translate(o,t,n,e){return e=e||[],e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=o,e[13]=t,e[14]=n,e[15]=1,e}static scale(o,t,n,e){return e=e||[],e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static rotateX(o,t){t=t||[];var n=Math.cos(o),e=Math.sin(o);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=-e,t[7]=0,t[8]=0,t[9]=e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static rotateY(o,t){t=t||[];const n=Math.cos(o),e=Math.sin(o);return t[0]=n,t[1]=0,t[2]=e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static rotateZ(o,t){t=t||[];const n=Math.cos(o),e=Math.sin(o);return t[0]=n,t[1]=-e,t[2]=0,t[3]=0,t[4]=e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static inverse(o,t){t=t||[];const n=o[0*4+0],e=o[0*4+1],a=o[0*4+2],i=o[0*4+3],s=o[1*4+0],v=o[1*4+1],y=o[1*4+2],A=o[1*4+3],m=o[2*4+0],c=o[2*4+1],w=o[2*4+2],E=o[2*4+3],T=o[3*4+0],R=o[3*4+1],f=o[3*4+2],d=o[3*4+3],b=w*d,p=f*E,l=y*d,r=f*A,h=y*E,g=w*A,_=a*d,S=f*i,P=a*E,M=w*i,C=a*A,x=y*i,L=m*R,B=T*c,k=s*R,D=T*v,O=s*c,V=m*v,Y=n*R,I=T*e,N=n*c,W=m*e,z=n*v,H=s*e,q=b*v+r*c+h*R-(p*v+l*c+g*R),G=p*e+_*c+M*R-(b*e+S*c+P*R),K=l*e+S*v+C*R-(r*e+_*v+x*R),Z=g*e+P*v+x*c-(h*e+M*v+C*c),F=1/(n*q+s*G+m*K+T*Z);return t[0]=F*q,t[1]=F*G,t[2]=F*K,t[3]=F*Z,t[4]=F*(p*s+l*m+g*T-(b*s+r*m+h*T)),t[5]=F*(b*n+S*m+P*T-(p*n+_*m+M*T)),t[6]=F*(r*n+_*s+x*T-(l*n+S*s+C*T)),t[7]=F*(h*n+M*s+C*m-(g*n+P*s+x*m)),t[8]=F*(L*A+D*E+O*d-(B*A+k*E+V*d)),t[9]=F*(B*i+Y*E+W*d-(L*i+I*E+N*d)),t[10]=F*(k*i+I*A+z*d-(D*i+Y*A+H*d)),t[11]=F*(V*i+N*A+H*E-(O*i+W*A+z*E)),t[12]=F*(k*w+V*f+B*y-(O*f+L*y+D*w)),t[13]=F*(N*f+L*a+I*w-(Y*w+W*f+B*a)),t[14]=F*(Y*y+H*f+D*a-(z*f+k*a+I*y)),t[15]=F*(z*w+O*a+W*y-(N*y+H*w+V*a)),t}static perspective(o,t,n,e,a){a=a||[];const i=Math.tan(Math.PI*.5-.5*o),s=1/(n-e),v=i/t,y=(n+e)*s,A=n*e*s*2;return a[0]=v,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=y,a[11]=-1,a[12]=0,a[13]=0,a[14]=A,a[15]=0,a}static projection(o,t,n,e){return e=e||[],e[0]=2/o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2/t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2/n,e[11]=0,e[12]=-1,e[13]=1,e[14]=0,e[15]=1,e}static multiply(o,t,n){n=n||[];let e=o[0],a=o[1],i=o[2],s=o[3],v=o[4],y=o[5],A=o[6],m=o[7],c=o[8],w=o[9],E=o[10],T=o[11],R=o[12],f=o[13],d=o[14],b=o[15],p=t[0],l=t[1],r=t[2],h=t[3];return n[0]=p*e+l*v+r*c+h*R,n[1]=p*a+l*y+r*w+h*f,n[2]=p*i+l*A+r*E+h*d,n[3]=p*s+l*m+r*T+h*b,p=t[4],l=t[5],r=t[6],h=t[7],n[4]=p*e+l*v+r*c+h*R,n[5]=p*a+l*y+r*w+h*f,n[6]=p*i+l*A+r*E+h*d,n[7]=p*s+l*m+r*T+h*b,p=t[8],l=t[9],r=t[10],h=t[11],n[8]=p*e+l*v+r*c+h*R,n[9]=p*a+l*y+r*w+h*f,n[10]=p*i+l*A+r*E+h*d,n[11]=p*s+l*m+r*T+h*b,p=t[12],l=t[13],r=t[14],h=t[15],n[12]=p*e+l*v+r*c+h*R,n[13]=p*a+l*y+r*w+h*f,n[14]=p*i+l*A+r*E+h*d,n[15]=p*s+l*m+r*T+h*b,n}static applyVec3(o,t,n){n=n||[];var e=t[0],a=t[1],i=t[2],s=o[3]*e+o[7]*a+o[11]*i+o[15];return s=s||1,n[0]=(o[0]*e+o[4]*a+o[8]*i+o[12])/s,n[1]=(o[1]*e+o[5]*a+o[9]*i+o[13])/s,n[2]=(o[2]*e+o[6]*a+o[10]*i+o[14])/s,n}static multiplyArray(o,t){t=t||[];let n=j.tmpIdentity;for(let e=0;e<o.length;e++)n=j.multiply(n,o[e],t);return t}};let u=j;u.tmpIdentity=j.identity();class ot{constructor(t,n){if(this.gl=t,n.program)this.program=n.program;else if(n.vertexShader&&n.fragmentShader)this.program=this.createProgram(n.vertexShader,n.fragmentShader);else throw new Error("No shader program or sources found.");this.nextTexture=0,this.gl.useProgram(this.program);const e=this.attributes=n.attributes||[];for(const i in e)this.addAttribute(i,e[i]);const a=this.uniforms=n.uniforms||[];for(const i in a)this.addUniform(i,a[i])}addUniform(t,n){const e=this.gl,a=this.program;switch(this.uniforms[t]===void 0&&(this.uniforms[t]=n),this[t]===void 0&&(this[t]=n),n.location===void 0&&(n.location=e.getUniformLocation(a,t)),n.type){case e.FLOAT:e.uniform1f(n.location,n.value);break;case e.FLOAT_VEC2:e.uniform2fv(n.location,n.value);break;case e.FLOAT_VEC3:e.uniform3fv(n.location,n.value);break;case e.FLOAT_VEC4:e.uniform4fv(n.location,n.value);break;case e.FLOAT_MAT2:n.value=n.value||[1,0,0,1],e.uniformMatrix2fv(n.location,!1,n.value);break;case e.FLOAT_MAT4:n.value=n.value||u.identity(),e.uniformMatrix4fv(n.location,!1,n.value);break;case e.TEXTURE_2D:n.textureNum===void 0&&(n.textureNum=this.nextTexture++),n.texture=n.texture,e.uniform1i(n.location,n.textureNum),e.activeTexture(e["TEXTURE"+n.textureNum]);break;default:throw new Error("Unknown uniform type: "+n.type+" for uniform "+t)}return n}addAttribute(t,n){const e=this.gl,a=this.program;switch(this[t]=n,n.location=e.getAttribLocation(a,t),n.type){case e.ARRAY_BUFFER:n.buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,n.buffer),n.value=n.value||new Array(n.itemSize*n.itemCount),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n.value),e.STATIC_DRAW),e.enableVertexAttribArray(n.location),e.vertexAttribPointer(n.location,n.itemSize,e.FLOAT,!1,0,0);break;default:throw new Error("Unknown attribute type: "+n.type+" for attribute "+t)}}bindUniform(t){const n=this.gl,e=this.uniforms[t];switch(this.addUniform(t,e),e.type){case n.TEXTURE_2D:n.bindTexture(n.TEXTURE_2D,e.texture.glTexture);break}}bindAttribute(t){const n=this.gl,e=this.attributes[t];switch(e.type){case n.ARRAY_BUFFER:n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e.value),n.STATIC_DRAW),n.vertexAttribPointer(e.location,e.itemSize,n.FLOAT,!1,0,0);break;default:throw new Error("Unknown attribute type: "+e.type+" for attribute "+t)}}bind(){this.gl.useProgram(this.program);for(const t in this.uniforms)this.bindUniform(t);for(const t in this.attributes)this.bindAttribute(t)}createProgram(t,n){const e=this.gl,a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,t),e.compileShader(a);const i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,n),e.compileShader(i);const s=this.program=e.createProgram();if(e.attachShader(s,a),e.attachShader(s,i),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw"Shader.createProgram > Program link error: "+e.getProgramInfoLog(s);return s}}const X=Math.PI/180;function at(o,t,n){return new ot(o,{vertexShader:et,fragmentShader:nt,uniforms:{uTransform:{type:o.FLOAT_MAT4,value:u.identity()},uViewProjection:{type:o.FLOAT_MAT4,value:u.identity()},uColor:{type:o.FLOAT_VEC3,value:n}},attributes:{aPosition:{type:o.ARRAY_BUFFER,itemSize:3,itemCount:t.length/3,value:t.slice(0)}}})}function it(o){const t=[u.identity(),u.identity(),u.identity(),u.identity(),u.identity(),u.identity()];window.dispatchEvent(new Event("resize"));const n=o.gl;let e=75*X;const a=.1,i=2e3;function s(g){return[u.rotateY(-10*X),u.rotateY(Math.sin(g*3e-4)*.13),u.translate(.6,1.8,2),u.translate(0,0,1),u.rotateY(Math.sin(g*3e-4)*.2),u.rotateY(-15*X),u.rotateX(10*X)]}const v=s,y=u.identity(),A=[.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5],m=at(n,A,[1,0,1]);function c(g,_,S,P,M,C){return st(u.multiplyArray([u.translate(P,M,C),u.scale(g,_,S)]),A)}const w=c(1.62,2.79,1.82,0,1.395,0),E=c(.6,.85,.6,-.41,.425,-.51),T=c(.7,2,.2,.81-.35-.02,1,1.01),R=c(.2,2,.7,.91,1,-.51+.46),f=[],d=[];f.push(c(.01,1.8,.02,-.805,1.5,-.79)),f.push(c(.01,1.8,.02,-.805,1.5,-.19)),d.push(c(.6,.02,.8,-.49,1,-.49)),d.push(c(.6,.02,.8,-.49,1.4,-.49)),d.push(c(.6,.02,.8,-.49,2,-.49)),f.push(c(.01,1.8,.02,-.805,1.5,.31-.2)),f.push(c(.01,1.8,.02,-.805,1.5,.31+.2)),d.push(c(.6,.02,.8,-.49,1,.31)),d.push(c(.6,.02,.8,-.49,1.4,.31)),d.push(c(.6,.02,.8,-.49,2,.31)),f.push(c(.02,1.8,.01,.21-.3,1.5,-.905)),f.push(c(.02,1.8,.01,.21+.3,1.5,-.905)),d.push(c(.8,.02,.23,.21,2,-.775)),d.push(c(.8,.02,.23,.21,1.4,-.775)),d.push(c(.8,.02,.23,.21,1,-.775));function b(g){const _=g.gl;_.clearColor(0,0,0,1),_.clear(_.COLOR_BUFFER_BIT),U(_,m,w,[.3,.3,.3]),U(_,m,T,[.7,.7,.7]),U(_,m,R,[.7,.7,.7]),U(_,m,E,[.6,.1,.1]),d.forEach(S=>U(_,m,S,[.3,.8,.8])),f.forEach(S=>U(_,m,S,[.8,.3,.8])),_.flush()}function p(g){const _=g.renderTime;g.mouse,g.canvas,ct(g),u.multiplyArray(v(_),y),u.multiplyArray([u.translate(0,0,0,t[0]),u.scale(1,1,1,t[1])],m.uTransform.value);const S=n.canvas.clientWidth/n.canvas.clientHeight;u.multiplyArray([u.perspective(e,S,a,i),u.inverse(y,t[1])],m.uViewProjection.value)}let l;const r=tt();function h(g){if(l=requestAnimationFrame(h),r.begin(),o.renderTime===void 0)return o.renderTime=g;o.renderDeltaTime=(g-o.renderTime)*.001,o.renderTime=g,p(o),b(o),r.end()}l=requestAnimationFrame(h),$(()=>{cancelAnimationFrame(l)})}function U(o,t,n,e){t.attributes.aPosition.value.length=0,Array.prototype.push.apply(t.attributes.aPosition.value,n),e&&(t.uniforms.uColor.value.length=0,Array.prototype.push.apply(t.uniforms.uColor.value,e)),t.bind(),o.drawArrays(o.LINE_STRIP,0,t.attributes.aPosition.value.length/3)}function st(o,t,n){n=n||[];const e=[];for(let a=0;a<t.length;a+=3)e[0]=t[a+0],e[1]=t[a+1],e[2]=t[a+2],u.applyVec3(o,e,e),n[a+0]=e[0],n[a+1]=e[1],n[a+2]=e[2];return n}function ct(o){const t=o.gl;(o.viewportWidth!==t.drawingBufferWidth||o.viewportHeight!==t.drawingBufferHeight)&&(o.viewportWidth=t.drawingBufferWidth,o.viewportHeight=t.drawingBufferHeight,t.viewport(0,0,o.viewportWidth,o.viewportHeight))}const ut=Q("<canvas></canvas>");function ht(){const o=ut.cloneNode(!0),t={mouse:{x:0,y:0,dx:0,dy:0},canvas:document.createElement("canvas"),gl:o.getContext("webgl2")};function n(a){o.width=document.documentElement.clientWidth,o.height=document.documentElement.clientHeight}function e(a){const i=t.mouse,s=a.clientX,v=a.clientY;i.dx=s-i.x,i.dy=v-i.y,i.x=s,i.y=v}return t.canvas.addEventListener("mousemove",e),window.addEventListener("resize",n),J(()=>{it(t)}),o}export{ht as default};
