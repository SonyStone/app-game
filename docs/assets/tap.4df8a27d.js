/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M=function(n,r){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},M(n,r)};function j(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");M(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function yn(n,r,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function f(l){try{c(t.next(l))}catch(y){u(y)}}function a(l){try{c(t.throw(l))}catch(y){u(y)}}function c(l){l.done?o(l.value):i(l.value).then(f,a)}c((t=t.apply(n,r||[])).next())})}function X(n,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(c){return function(l){return a([c,l])}}function a(c){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(n,e)}catch(l){c=[6,l],i=0}finally{t=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function I(n){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&n[r],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(n,r){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),i,o=[],u;try{for(;(r===void 0||r-- >0)&&!(i=t.next()).done;)o.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(e=t.return)&&e.call(t)}finally{if(u)throw u.error}}return o}function O(n,r,e){if(e||arguments.length===2)for(var t=0,i=r.length,o;t<i;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return n.concat(o||Array.prototype.slice.call(r))}function E(n){return this instanceof E?(this.v=n,this):new E(n)}function pn(n,r,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(n,r||[]),i,o=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(h){t[h]&&(i[h]=function(d){return new Promise(function(m,v){o.push([h,d,m,v])>1||f(h,d)})})}function f(h,d){try{a(t[h](d))}catch(m){y(o[0][3],m)}}function a(h){h.value instanceof E?Promise.resolve(h.value.v).then(c,l):y(o[0][2],h)}function c(h){f("next",h)}function l(h){f("throw",h)}function y(h,d){h(d),o.shift(),o.length&&f(o[0][0],o[0][1])}}function mn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],e;return r?r.call(n):(n=typeof I=="function"?I(n):n[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(o){e[o]=n[o]&&function(u){return new Promise(function(f,a){u=n[o](u),i(f,a,u.done,u.value)})}}function i(o,u,f,a){Promise.resolve(a).then(function(c){o({value:c,done:f})},u)}}function s(n){return typeof n=="function"}function bn(n){var r=function(t){Error.call(t),t.stack=new Error().stack},e=n(r);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var k=bn(function(n){return function(e){n(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,i){return i+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Q(n,r){if(n){var e=n.indexOf(r);0<=e&&n.splice(e,1)}}var Z=function(){function n(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._teardowns=null}return n.prototype.unsubscribe=function(){var r,e,t,i,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var f=I(u),a=f.next();!a.done;a=f.next()){var c=a.value;c.remove(this)}}catch(v){r={error:v}}finally{try{a&&!a.done&&(e=f.return)&&e.call(f)}finally{if(r)throw r.error}}else u.remove(this);var l=this.initialTeardown;if(s(l))try{l()}catch(v){o=v instanceof k?v.errors:[v]}var y=this._teardowns;if(y){this._teardowns=null;try{for(var h=I(y),d=h.next();!d.done;d=h.next()){var m=d.value;try{V(m)}catch(v){o=o!=null?o:[],v instanceof k?o=O(O([],A(o)),A(v.errors)):o.push(v)}}}catch(v){t={error:v}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}}if(o)throw new k(o)}},n.prototype.add=function(r){var e;if(r&&r!==this)if(this.closed)V(r);else{if(r instanceof n){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._teardowns=(e=this._teardowns)!==null&&e!==void 0?e:[]).push(r)}},n.prototype._hasParent=function(r){var e=this._parentage;return e===r||Array.isArray(e)&&e.includes(r)},n.prototype._addParent=function(r){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(r),e):e?[e,r]:r},n.prototype._removeParent=function(r){var e=this._parentage;e===r?this._parentage=null:Array.isArray(e)&&Q(e,r)},n.prototype.remove=function(r){var e=this._teardowns;e&&Q(e,r),r instanceof n&&r._removeParent(this)},n.EMPTY=function(){var r=new n;return r.closed=!0,r}(),n}();function B(n){return n instanceof Z||n&&"closed"in n&&s(n.remove)&&s(n.add)&&s(n.unsubscribe)}function V(n){s(n)?n():n.unsubscribe()}var L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_={setTimeout:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=_.delegate;return((e==null?void 0:e.setTimeout)||setTimeout).apply(void 0,O([],A(n)))},clearTimeout:function(n){var r=_.delegate;return((r==null?void 0:r.clearTimeout)||clearTimeout)(n)},delegate:void 0};function N(n){_.setTimeout(function(){var r=L.onUnhandledError;if(r)r(n);else throw n})}function C(){}var wn=function(){return Y("C",void 0,void 0)}();function Sn(n){return Y("E",void 0,n)}function gn(n){return Y("N",n,void 0)}function Y(n,r,e){return{kind:n,value:r,error:e}}function En(n){n()}var G=function(n){j(r,n);function r(e){var t=n.call(this)||this;return t.isStopped=!1,e?(t.destination=e,B(e)&&e.add(t)):t.destination=Tn,t}return r.create=function(e,t,i){return new F(e,t,i)},r.prototype.next=function(e){this.isStopped?R(gn(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?R(Sn(e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?R(wn,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(Z),xn=Function.prototype.bind;function U(n,r){return xn.call(n,r)}var In=function(){function n(r){this.partialObserver=r}return n.prototype.next=function(r){var e=this.partialObserver;if(e.next)try{e.next(r)}catch(t){P(t)}},n.prototype.error=function(r){var e=this.partialObserver;if(e.error)try{e.error(r)}catch(t){P(t)}else P(r)},n.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(e){P(e)}},n}(),F=function(n){j(r,n);function r(e,t,i){var o=n.call(this)||this,u;if(s(e)||!e)u={next:e!=null?e:void 0,error:t!=null?t:void 0,complete:i!=null?i:void 0};else{var f;o&&L.useDeprecatedNextContext?(f=Object.create(e),f.unsubscribe=function(){return o.unsubscribe()},u={next:e.next&&U(e.next,f),error:e.error&&U(e.error,f),complete:e.complete&&U(e.complete,f)}):u=e}return o.destination=new In(u),o}return r}(G);function P(n){N(n)}function An(n){throw n}function R(n,r){var e=L.onStoppedNotification;e&&_.setTimeout(function(){return e(n,r)})}var Tn={closed:!0,next:C,error:An,complete:C},z=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function D(n){return n}function Pn(n){return n.length===0?D:n.length===1?n[0]:function(e){return n.reduce(function(t,i){return i(t)},e)}}var p=function(){function n(r){r&&(this._subscribe=r)}return n.prototype.lift=function(r){var e=new n;return e.source=this,e.operator=r,e},n.prototype.subscribe=function(r,e,t){var i=this,o=_n(r)?r:new F(r,e,t);return En(function(){var u=i,f=u.operator,a=u.source;o.add(f?f.call(o,a):a?i._subscribe(o):i._trySubscribe(o))}),o},n.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(e){r.error(e)}},n.prototype.forEach=function(r,e){var t=this;return e=$(e),new e(function(i,o){var u=new F({next:function(f){try{r(f)}catch(a){o(a),u.unsubscribe()}},error:o,complete:i});t.subscribe(u)})},n.prototype._subscribe=function(r){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(r)},n.prototype[z]=function(){return this},n.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Pn(r)(this)},n.prototype.toPromise=function(r){var e=this;return r=$(r),new r(function(t,i){var o;e.subscribe(function(u){return o=u},function(u){return i(u)},function(){return t(o)})})},n.create=function(r){return new n(r)},n}();function $(n){var r;return(r=n!=null?n:L.Promise)!==null&&r!==void 0?r:Promise}function On(n){return n&&s(n.next)&&s(n.error)&&s(n.complete)}function _n(n){return n&&n instanceof G||On(n)&&B(n)}function Ln(n){return s(n==null?void 0:n.lift)}function g(n){return function(r){if(Ln(r))return r.lift(function(e){try{return n(e,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function S(n,r,e,t,i){return new kn(n,r,e,t,i)}var kn=function(n){j(r,n);function r(e,t,i,o,u,f){var a=n.call(this,e)||this;return a.onFinalize=u,a.shouldUnsubscribe=f,a._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:n.prototype._next,a._error=o?function(c){try{o(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:n.prototype._error,a._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,a}return r.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;n.prototype.unsubscribe.call(this),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},r}(G),Un=new p(function(n){return n.complete()});function Rn(n){return n&&s(n.schedule)}function nn(n){return n[n.length-1]}function Mn(n){return Rn(nn(n))?n.pop():void 0}function Cn(n,r){return typeof nn(n)=="number"?n.pop():r}var H=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function rn(n){return s(n==null?void 0:n.then)}function en(n){return s(n[z])}function tn(n){return Symbol.asyncIterator&&s(n==null?void 0:n[Symbol.asyncIterator])}function on(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Fn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var un=Fn();function cn(n){return s(n==null?void 0:n[un])}function an(n){return pn(this,arguments,function(){var e,t,i,o;return X(this,function(u){switch(u.label){case 0:e=n.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,E(e.read())];case 3:return t=u.sent(),i=t.value,o=t.done,o?[4,E(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,E(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function fn(n){return s(n==null?void 0:n.getReader)}function w(n){if(n instanceof p)return n;if(n!=null){if(en(n))return jn(n);if(H(n))return Yn(n);if(rn(n))return Gn(n);if(tn(n))return ln(n);if(cn(n))return zn(n);if(fn(n))return Dn(n)}throw on(n)}function jn(n){return new p(function(r){var e=n[z]();if(s(e.subscribe))return e.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Yn(n){return new p(function(r){for(var e=0;e<n.length&&!r.closed;e++)r.next(n[e]);r.complete()})}function Gn(n){return new p(function(r){n.then(function(e){r.closed||(r.next(e),r.complete())},function(e){return r.error(e)}).then(null,N)})}function zn(n){return new p(function(r){var e,t;try{for(var i=I(n),o=i.next();!o.done;o=i.next()){var u=o.value;if(r.next(u),r.closed)return}}catch(f){e={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}r.complete()})}function ln(n){return new p(function(r){Hn(n,r).catch(function(e){return r.error(e)})})}function Dn(n){return ln(an(n))}function Hn(n,r){var e,t,i,o;return yn(this,void 0,void 0,function(){var u,f;return X(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),e=mn(n),a.label=1;case 1:return[4,e.next()];case 2:if(t=a.sent(),!!t.done)return[3,4];if(u=t.value,r.next(u),r.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=a.sent(),i={error:f},[3,11];case 6:return a.trys.push([6,,9,10]),t&&!t.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function b(n,r,e,t,i){t===void 0&&(t=0),i===void 0&&(i=!1);var o=r.schedule(function(){e(),i?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(o),!i)return o}function sn(n,r){return r===void 0&&(r=0),g(function(e,t){e.subscribe(S(t,function(i){return b(t,n,function(){return t.next(i)},r)},function(){return b(t,n,function(){return t.complete()},r)},function(i){return b(t,n,function(){return t.error(i)},r)}))})}function hn(n,r){return r===void 0&&(r=0),g(function(e,t){t.add(n.schedule(function(){return e.subscribe(t)},r))})}function qn(n,r){return w(n).pipe(hn(r),sn(r))}function Jn(n,r){return w(n).pipe(hn(r),sn(r))}function Qn(n,r){return new p(function(e){var t=0;return r.schedule(function(){t===n.length?e.complete():(e.next(n[t++]),e.closed||this.schedule())})})}function Vn(n,r){return new p(function(e){var t;return b(e,r,function(){t=n[un](),b(e,r,function(){var i,o,u;try{i=t.next(),o=i.value,u=i.done}catch(f){e.error(f);return}u?e.complete():e.next(o)},0,!0)}),function(){return s(t==null?void 0:t.return)&&t.return()}})}function vn(n,r){if(!n)throw new Error("Iterable cannot be null");return new p(function(e){b(e,r,function(){var t=n[Symbol.asyncIterator]();b(e,r,function(){t.next().then(function(i){i.done?e.complete():e.next(i.value)})},0,!0)})})}function $n(n,r){return vn(an(n),r)}function Kn(n,r){if(n!=null){if(en(n))return qn(n,r);if(H(n))return Qn(n,r);if(rn(n))return Jn(n,r);if(tn(n))return vn(n,r);if(cn(n))return Vn(n,r);if(fn(n))return $n(n,r)}throw on(n)}function Wn(n,r){return r?Kn(n,r):w(n)}function dn(n,r){return g(function(e,t){var i=0;e.subscribe(S(t,function(o){t.next(n.call(r,o,i++))}))})}var Xn=Array.isArray;function Zn(n,r){return Xn(r)?n.apply(void 0,O([],A(r))):n(r)}function Bn(n){return dn(function(r){return Zn(n,r)})}function Nn(n,r,e,t,i,o,u,f){var a=[],c=0,l=0,y=!1,h=function(){y&&!a.length&&!c&&r.complete()},d=function(v){return c<t?m(v):a.push(v)},m=function(v){o&&r.next(v),c++;var J=!1;w(e(v,l++)).subscribe(S(r,function(x){i==null||i(x),o?d(x):r.next(x)},function(){J=!0},void 0,function(){if(J)try{c--;for(var x=function(){var T=a.shift();u?b(r,u,function(){return m(T)}):m(T)};a.length&&c<t;)x();h()}catch(T){r.error(T)}}))};return n.subscribe(S(r,d,function(){y=!0,h()})),function(){f==null||f()}}function q(n,r,e){return e===void 0&&(e=1/0),s(r)?q(function(t,i){return dn(function(o,u){return r(t,o,i,u)})(w(n(t,i)))},e):(typeof r=="number"&&(e=r),g(function(t,i){return Nn(t,i,n,e)}))}function nr(n){return n===void 0&&(n=1/0),q(D,n)}var rr=["addListener","removeListener"],er=["addEventListener","removeEventListener"],tr=["on","off"];function K(n,r,e,t){if(s(e)&&(t=e,e=void 0),t)return K(n,r,e).pipe(Bn(t));var i=A(ur(n)?er.map(function(f){return function(a){return n[f](r,a,e)}}):or(n)?rr.map(W(n,r)):ir(n)?tr.map(W(n,r)):[],2),o=i[0],u=i[1];if(!o&&H(n))return q(function(f){return K(f,r,e)})(w(n));if(!o)throw new TypeError("Invalid event target");return new p(function(f){var a=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return f.next(1<c.length?c:c[0])};return o(a),function(){return u(a)}})}function W(n,r){return function(e){return function(t){return n[e](r,t)}}}function or(n){return s(n.addListener)&&s(n.removeListener)}function ir(n){return s(n.on)&&s(n.off)}function ur(n){return s(n.addEventListener)&&s(n.removeEventListener)}function cr(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=Mn(n),t=Cn(n,1/0),i=n;return i.length?i.length===1?w(i[0]):nr(t)(Wn(i,e)):Un}function ar(){return g(function(n,r){var e,t=!1;n.subscribe(S(r,function(i){var o=e;e=i,t&&r.next([o,i]),t=!0}))})}function fr(n){return g(function(r,e){w(n).subscribe(S(e,function(){return e.complete()},C)),!e.closed&&r.subscribe(e)})}function lr(n,r,e){var t=s(n)||r||e?{next:n,error:r,complete:e}:n;return t?g(function(i,o){var u;(u=t.subscribe)===null||u===void 0||u.call(t);var f=!0;i.subscribe(S(o,function(a){var c;(c=t.next)===null||c===void 0||c.call(t,a),o.next(a)},function(){var a;f=!1,(a=t.complete)===null||a===void 0||a.call(t),o.complete()},function(a){var c;f=!1,(c=t.error)===null||c===void 0||c.call(t,a),o.error(a)},function(){var a,c;f&&((a=t.unsubscribe)===null||a===void 0||a.call(t)),(c=t.finalize)===null||c===void 0||c.call(t)}))}):D}export{s as a,cr as b,S as c,lr as d,q as e,K as f,w as i,dn as m,g as o,ar as p,fr as t};
